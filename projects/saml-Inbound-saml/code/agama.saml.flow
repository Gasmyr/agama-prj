Flow agama.saml
     Basepath ""
     Timeout 500 seconds
     Configs kcConf
// Calling SAML service
Log "@info Calling SAML service"
// Log kcConf properties
Log "@info " kcConf.serverUrl kcConf.realm kcConf.clientId
// Create instance of SamlService
samlService | ex = Call org.gluu.agama.saml.service.SamlService#new kcConf.serverUrl  kcConf.realm  kcConf.clientId  kcConf.clientSecret  kcConf.grantType  kcConf.scope  kcConf.username  kcConf.password  kcConf.spMetadataUrl  kcConf.tokenUrl  kcConf.idpUrl
// Log samlService instance
Log "@info " samlService
// Get All IDP Details
idpMap | ex = Call samlService getIdps 
// Log idpMap
Log "@info " idpMap
// Display SAML Discovery Page idpMapData
extIdpData = RRF "saml-idp-discovery.ftlh" idpMap
// Redirect to external IDP
callData = RFAC https://pujavs-advanced-ewe.gluu.info/kc/realms/jans/protocol/openid-connect/auth?client_id=jans-4a85d4ba-8057-4d94-a045-0c98007f2c8f&redirect_uri=https://pujavs-advanced-ewe.gluu.info/kc/realms/jans/account&response_type=code&kc_idp_hint=busy-starfish-idp
it_hhldd = undefined
Finish it_hhldd