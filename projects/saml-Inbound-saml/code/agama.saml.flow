Flow agama.saml
     Basepath ""
     Timeout 500 seconds
     Configs kcConf
// Calling SAML service
Log "@info Calling SAML service"
// Log kcConf properties
Log "@info " kcConf.serverUrl kcConf.realm kcConf.clientId
// Create instance of SamlService
samlService | ex = Call org.gluu.agama.saml.service.SamlService#new kcConf.serverUrl  kcConf.realm  kcConf.clientId  kcConf.clientSecret  kcConf.grantType  kcConf.scope  kcConf.username  kcConf.password  kcConf.spMetadataUrl  kcConf.tokenUrl  kcConf.idpUrl
// Log samlService instance
Log "@info " samlService
// Get All IDP Details
idpMap | ex = Call samlService getIdps 
// Log idpMap
Log "@info " idpMap
extIdpData = RRF "saml-idp-discovery.ftlh" idpMap
Log "@info " extIdpData.extIdpRedirectUrl